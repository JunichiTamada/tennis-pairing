# „ÉÜ„Éã„Çπ„ÉÄ„Éñ„É´„Çπ„Éª„Éö„Ç¢Ê±∫„ÇÅ Web „Ç¢„Éó„É™ÔºàMVPÔºâ

GitHub Pages „ÅßÂÖ¨Èñã„Åó„Å¶„ÅÑ„Çã„ÄÅ**ÂΩìÊó•ÂèÇÂä†„É°„É≥„Éê„Éº„Åã„Çâ„ÉÄ„Éñ„É´„Çπ„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„ÇíËá™ÂãïÁîüÊàê**„Åô„Çã„Ç∑„É≥„Ç∞„É´„Éö„Éº„Ç∏„Ç¢„Éó„É™ÔºàSPAÔºâ„Åß„Åô„ÄÇ

## üìå Stable v1 (with Undo)

- Live: https://junichitamada.github.io/tennis-pairing/v1/
- Branch: `release/v1`
- Latest: **v1.1.0** (Undo support)
- Changelog: https://github.com/JunichiTamada/tennis-pairing/releases/tag/v1.1.0

* ÂÖ¨ÈñãURL: [https://junichitamada.github.io/tennis-pairing/](https://junichitamada.github.io/tennis-pairing/)
* Êé®Â•®Á´ØÊú´: **„Çπ„Éû„Éõ**ÔºàÂ±ãÂ§ñ„Åß„ÅÆÂà©Áî®„ÇíÊÉ≥ÂÆöÔºâÔºèPC„Éñ„É©„Ç¶„Ç∂„Åß„ÇÇÂèØ

> ÂΩìÊó•„ÅÆÁä∂ÊÖã„ÅØÁ´ØÊú´„ÅÆ **localStorage** „Å´Ëá™Âãï‰øùÂ≠ò„Åï„Çå„ÄÅÁøåÊó•„Å´Ëá™Âãï„É™„Çª„ÉÉ„Éà„Åï„Çå„Åæ„ÅôÔºà„Äå‰ªäÊó•„ÅÆÁä∂ÊÖã„ÇíÊ∂àÂéª„Äç„ÅßÊâãÂãï„É™„Çª„ÉÉ„ÉàÂèØÔºâ„ÄÇ

---

## ÁâπÈï∑

* **Â±ãÂ§ñ„É¢„Éº„Éâ**ÔºàÈ´òËºùÂ∫¶ÔºâÔºöÈªÑËâ≤„ÅÆÂº∑Ë™øËâ≤„ÅßÂ±ãÂ§ñ„Åß„ÇÇË¶ñË™çÊÄß„ÇíÁ¢∫‰øù
* **Â±ãÂÜÖ„É¢„Éº„Éâ**ÔºàÊøÉ„Ç∞„É¨„ÉºÂü∫Ë™øÔºâÔºö„Ç≥„É≥„Éà„É©„Çπ„ÉàÈáçË¶ñ„ÅÆÈÖçËâ≤
* **ÊúÄÊñ∞„É©„Ç¶„É≥„Éâ„ÅåÊúÄ‰∏äÊÆµ**„ÄÅ3Ë°å„É¨„Ç§„Ç¢„Ç¶„ÉàÔºà‰∏ä:„Éö„Ç¢AÔºè‰∏≠:vsÔºè‰∏ã:„Éö„Ç¢BÔºâ
* **Èï∑Êäº„ÅóÔºà„Çπ„Éû„ÉõÔºâÔºèÂè≥„ÇØ„É™„ÉÉ„ÇØÔºàPCÔºâ„Åß‰∏ÄÊôÇÈõ¢ËÑ±**„ÄÅ„Çø„ÉÉ„Éó„ÅßÈÅ∏Êäû/Ëß£Èô§
* **Êó•‰ªò„Éô„Éº„Çπ„ÅÆÊì¨‰ºº„Ç∑„Éº„Éâ**„Åß‚ÄúÂêåÁÇπÂÄôË£ú„ÅÆ„É©„É≥„ÉÄ„É†‚Äù„ÇíÂΩìÊó•ÂÜÖ„ÅßÂÜçÁèæÂèØËÉΩ
* **ÂèçËª¢Á¶ÅÊ≠¢**ÔºàAB vs CD ‚Üí BA vs DC „ÅØNGÔºâ„ÇÑ **ÈÄ£Á∂ö‰ºë„ÅøÂõûÈÅø** „ÇíËÄÉÊÖÆ
* **Âêå„ÅòÂèÇÂä†ËÄÖ„Åß„ÇÇÂàùÂõû„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„ÅØ„É©„É≥„ÉÄ„É†„Å´Â§âÂåñ**ÔºàÂõ∫ÂÆöÂåñ„ÇíÂõûÈÅøÔºâ

---

## ‰Ωø„ÅÑÊñπÔºàÁèæÂ†¥Âêë„Åë„ÇØ„Ç§„ÉÉ„ÇØ„Ç¨„Ç§„ÉâÔºâ

1. ÂèÇÂä†ËÄÖÂêç„Çí„Çø„ÉÉ„Éó„Åó„Å¶**ÈÅ∏Êäû**ÔºàËß£Èô§„ÇÇ„Çø„ÉÉ„ÉóÔºâ„ÄÇ
2. **Èï∑Êäº„ÅóÔºà„Çπ„Éû„ÉõÔºâÔºèÂè≥„ÇØ„É™„ÉÉ„ÇØÔºàPCÔºâ**„Åß‰∏ÄÊôÇÈõ¢ËÑ±ÔºèÂæ©Â∏∞„ÄÇ
3. „Äå**Ê¨°„ÅÆ„Éö„Ç¢„ÇíÊ±∫„ÇÅ„Çã**„Äç„ÇíÊäº„Åô„ÄÇ
4. ÊúÄÊñ∞„É©„Ç¶„É≥„Éâ„Åå‰∏ÄÁï™‰∏ä„Å´Ë°®Á§∫„ÄÇ‰ºëÊÜ©ËÄÖ„ÅØ„Äå‰ºëÊÜ©: ‚Ä¶„Äç„Å´Ë°®Á§∫„ÄÇ
5. „ÇÑ„ÇäÁõ¥„Åó„Åü„ÅÑ„Å®„Åç„ÅØ„Äå**‰ªäÊó•„ÅÆÁä∂ÊÖã„ÇíÊ∂àÂéªÔºàÊñ∞Ë¶èÈñãÂßãÔºâ**„Äç„ÄÇ

> „Éí„É≥„Éà„ÅØÁîªÈù¢‰∏ã„Å´Â∏∏ÊôÇË°®Á§∫„ÄÇËá™Â∑±„ÉÜ„Çπ„Éà„ÅØ„ÄåËá™Â∑±„ÉÜ„Çπ„Éà„ÇíÂÆüË°å„Äç„ÄÇ

---

## „Ç¢„É´„Ç¥„É™„Ç∫„É†„ÅÆÊ¶ÇË¶Å

ÂΩìÊó•Â±•Ê≠¥„Åã„Çâ‰ª•‰∏ã„ÇíÈõÜË®à„Åó„ÄÅ**„Çπ„Ç≥„Ç¢„ÅåÊúÄÂ∞è**„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„ÇíÊé°Áî®„Åó„Åæ„Åô„ÄÇ

* **Âêå‰∏Ä„Éö„Ç¢ÂõûÊï∞**ÔºàÈáç„Åø *wPartner*Ôºâ
* **ÂÄã‰∫∫√óÂÄã‰∫∫„ÅÆÂØæÊà¶ÂõûÊï∞**ÔºàÈáç„Åø *wOpp*Ôºâ
* **Áõ¥ÂâçÈ°û‰ºº„Éö„Éä„É´„ÉÜ„Ç£**ÔºàÈáç„Åø *wPrev*Ôºâ
* **Áõ¥Ââç‰ºë„Åø„ÅÆÈÄ£Á∂öÂõûÈÅø**ÔºàÂõ∫ÂÆö„Éö„Éä„É´„ÉÜ„Ç£Ôºâ

**ÂèçËª¢Á¶ÅÊ≠¢**ÔºöÂêå„Åò4‰∫∫„Åß AB vs CD „ÅÆÊ¨°„Å´ BA vs DC „Å´„Å™„ÇãÊ°à„ÅØ‰∏çÊé°Áî®„ÄÇ
**ÂêåÁÇπÂÄôË£ú**„ÅåË§áÊï∞„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ**ÂΩìÊó•„Ç∑„Éº„Éâ„ÅÆ‰π±Êï∞**„Åß„É©„É≥„ÉÄ„É†„Å´1Ê°à„ÇíÈÅ∏ÊäûÔºàÂΩìÊó•ÂÜÖ„ÅØÂÜçÁèæÂèØËÉΩÔºâ„ÄÇ

---

## ÈñãÁô∫ÊÉÖÂ†±

* Framework: **Vite + React + TypeScript**
* UI: **Tailwind CSS v4**, **shadcn/ui**ÔºàButton, CardÔºâ
* „Éá„Éó„É≠„Ç§: **GitHub Pages**ÔºàActions „Å´„Çà„ÇãËá™Âãï„Éì„É´„Éâ & „Éá„Éó„É≠„Ç§Ôºâ

### „É≠„Éº„Ç´„É´ÂÆüË°å

```bash
# ‰æùÂ≠òÈñ¢‰øÇ„ÅÆÂ∞éÂÖ•
npm i

# ÈñãÁô∫„Çµ„Éº„ÉêÔºàhttp://localhost:5173Ôºâ
npm run dev

# Êú¨Áï™„Éì„É´„Éâ
npm run build

# „Éì„É´„Éâ„ÅÆ„Éó„É¨„Éì„É•„ÉºÔºàÂøÖË¶Å„Å™„ÇâÔºâ
npm run preview
```

### „Éá„Éó„É≠„Ç§ÔºàGitHub ActionsÔºâ

* `main` „Éñ„É©„É≥„ÉÅ„Å´ push ‚Üí Ëá™Âãï„Åß **build & deploy** „ÅåËµ∞„Çä„Åæ„Åô„ÄÇ
* „Éô„Éº„Çπ„Éë„Çπ„ÅØ `vite.config.ts` „ÅÆ `base: '/tennis-pairing/'` „Çí‰ΩøÁî®„ÄÇ
* ÂèçÊò†„ÅåË¶ã„Åà„Å™„ÅÑ„Å®„Åç„ÅØ„Ç≠„É£„ÉÉ„Ç∑„É•ÂõûÈÅø„Åß `?v=Êó•ÊôÇ` „Çí‰ªò„Åë„Å¶„Ç¢„ÇØ„Çª„Çπ„ÄÇ

### Tailwind „ÅÆ safelist

„Éì„É´„ÉâÊôÇ„Å´‰ΩøÁî®„ÇØ„É©„Çπ„ÅÆ„Åø„Åå CSS „Å´ÊÆã„Çã„Åü„ÇÅ„ÄÅ**ÂãïÁöÑ„Å´Âàá„ÇäÊõø„Åà„ÇãËâ≤„ÇØ„É©„Çπ**„ÅØ safelist Ê∏à„ÅøÔºà`tailwind.config.js`Ôºâ„ÄÇ

---

## Ë®≠ÂÆö„Éª‰ªïÊßò„É°„É¢

* **Â±ãÂ§ñ/Â±ãÂÜÖ„É¢„Éº„Éâ**ÔºöÊñáË®Ä„ÅØÂõ∫ÂÆö„ÄåÂ±ãÂ§ñ„É¢„Éº„Éâ„Äç„ÄÇËâ≤„ÅßÁä∂ÊÖã„ÇíË°®Á§∫ÔºàON=ÈªÑËâ≤„ÄÅOFF=ÁôΩÔºâ„ÄÇ
* **ÂèÇÂä†ËÄÖÂêçË°®Á§∫**Ôºö„ÄåÁôªÈå≤Âêç + „Åï„Çì„Äç„ÄÇ„Ç≥„Éº„ÉâÂÜÖ„ÅÆÂêçÂâç„ÅØ„Äå„Åï„Çì„ÄçÁÑ°„Åó„Åß‰øùÊåÅ„ÄÇ
* **‰∏ÄÊôÇÈõ¢ËÑ±„ÅÆÂãï‰Ωú**Ôºö

  * ÈÅ∏Êäû‰∏≠„ÅÆ„ÅøÈï∑Êäº„Åó/Âè≥„ÇØ„É™„ÉÉ„ÇØ„ÅåÊúâÂäπ„ÄÇ
  * Âæ©Â∏∞Âæå„ÄÅÁõ¥Ëøë„É©„Ç¶„É≥„Éâ„ÅÆÁµÑ„ÅøÂêà„Çè„ÅõÂÑ™ÂÖà„É≠„Ç∏„ÉÉ„ÇØ„ÅßÂèçÊò†„ÄÇ
* **Èáç„ÅøË®≠ÂÆö**Ôºö„ÄåÈáç„Åø„Çí„Éá„Éï„Ç©„É´„Éà„Å´Êàª„Åô„Äç„Åß `wPartner=2, wOpp=1, wPrev=1` „Å´Êàª„Çã„ÄÇ
* **„Éá„Éº„ÇøÊ∞∏Á∂öÂåñ**Ôºö`localStorage`Ôºà„Ç≠„Éº: `tdoubles_state_v1` / `tdoubles_prefs_v1`Ôºâ„ÄÇ

---

## „Éà„É©„Éñ„É´„Ç∑„É•„Éº„Éà

* **Ëâ≤„ÅåÂèçÊò†„Åï„Çå„Å™„ÅÑ** ‚Üí „Éñ„É©„Ç¶„Ç∂„Ç≠„É£„ÉÉ„Ç∑„É•„ÅÆÂΩ±Èüø„ÄÇ`?v=2025xxxx` „Çí‰ªò„Åë„Çã„Åã„ÄÅ„Éè„Éº„Éâ„É™„É≠„Éº„Éâ„ÄÇ
* **„Çπ„Éû„Éõ„Åß„Éú„Çø„É≥Ëâ≤„ÅåËñÑ„ÅÑ** ‚Üí OS/„Éñ„É©„Ç¶„Ç∂„ÅÆËá™ÂãïÁùÄËâ≤„ÇíÊäëÊ≠¢Ê∏àÔºà`appearance-none` / `!bg-‚Ä¶`Ôºâ„ÄÇ„Åù„Çå„Åß„ÇÇËñÑ„ÅÑÂ†¥Âêà„ÅØÂ†±Âëä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
* **GitHub Pages „Åå 404** ‚Üí „Åì„ÅÆ„É™„Éù„Ç∏„Éà„É™„ÅÆ **Settings ‚Üí Pages** „ÅßÂÖ¨ÈñãË®≠ÂÆö„ÇíÁ¢∫Ë™ç„ÄÇ

---

## ÈÖçÂ∏ÉÁî®„Ç™„Éó„Ç∑„Éß„É≥Ôºà‰ªªÊÑèÔºâ

* **Áü≠Á∏ÆURL**Ôºà‰æãÔºöbit.ly „Åß `https://bit.ly/tennis-pair` „ÇíÂèñÂæóÔºâ
* **QR„Ç≥„Éº„Éâ**Ôºö`docs/qr.png` „ÇíÁΩÆ„ÅÑ„Å¶ README „Å´Ë≤º„Çã„Å®ÁèæÂ†¥„ÅßÈÖçÂ∏É„ÅåÊ•Ω„Åß„Åô„ÄÇ

---

## „É©„Ç§„Çª„É≥„Çπ

* ÁèæÂú®: **Private/ÈùûÂÖ¨ÈñãÁî®ÈÄî**„ÄÇÂÖ¨Èñã„Å´Âàá„ÇäÊõø„Åà„ÇãÂ†¥Âêà„ÅØ **MIT** „Å™„Å©„Å∏Â§âÊõ¥ÂèØ„ÄÇ

---

## Â§âÊõ¥Â±•Ê≠¥ÔºàÊäúÁ≤ãÔºâ

* MVP: Â±ãÂ§ñ/Â±ãÂÜÖ„É¢„Éº„Éâ„ÄÅÊúÄÊñ∞‰∏äË°®Á§∫„ÄÅÂèçËª¢Á¶ÅÊ≠¢„ÉªÈÄ£Á∂ö‰ºë„ÅøÂõûÈÅø„ÄÅÂΩìÊó•„Ç∑„Éº„Éâ„ÄÅËá™Â∑±„ÉÜ„Çπ„Éà„ÄÅ„Éò„É´„Éó„ÄÅ„É¢„Éº„ÉÄ„É´Á¢∫Ë™ç„ÄÅÈÖçËâ≤Ë™øÊï¥„ÄÇ

---

# English README (MVP)

A single-page app (SPA) published on GitHub Pages that **automatically suggests doubles pairings** from the participants available **today**.

* Live URL: [https://junichitamada.github.io/tennis-pairing/](https://junichitamada.github.io/tennis-pairing/)
* Recommended device: **smartphone** (optimized for outdoor use); desktop browsers also supported

> The state of the day is automatically saved to the device's **localStorage** and **reset the next day**. You can also reset manually via **‚ÄúClear today‚Äôs state‚Äù**.

---

## Features

* **Outdoor mode** (high brightness): yellow accents for visibility under sunlight
* **Indoor mode** (dark gray theme): contrast-focused palette
* **Newest round at the top**, displayed in **three lines** (Top: Pair A / Middle: ‚Äúvs‚Äù / Bottom: Pair B)
* **Long-press (mobile) / Right-click (desktop)** for temporary leave; tap to select/deselect
* **Date-based pseudo-random seed** to keep tie-breaking random choices reproducible within the same day
* **Flip prevention** (AB vs CD ‚Üí BA vs DC is disallowed) and **avoid back-to-back rests**
* **Initial pairing varies randomly** even with the same participants (avoids fixed pattern)

---

## Quick Start (For Courtside Use)

1. Tap player names to **select** (tap again to deselect).
2. **Long-press (mobile) / Right-click (desktop)** to toggle temporary leave / return.
3. Press **‚ÄúDecide next pairs‚Äù**.
4. The newest round appears at the top. Resting players are shown under **‚ÄúRest:‚Äù**.
5. To restart, press **‚ÄúClear today‚Äôs state (start fresh)‚Äù**.

> A short **hint** is always shown at the bottom. **Self-tests** can be run via the ‚ÄúRun self-tests‚Äù button.

---

## Algorithm Overview

We aggregate the day‚Äôs history and pick a combination with the **minimum score** considering:

* **Repeat partner counts** (*wPartner*)
* **Head-to-head opponent counts** (*wOpp*)
* **Similarity to the previous round** (*wPrev*)
* **Penalty for making the same people rest twice in a row**

**Flip prevention**: For the same four players, if one round was AB vs CD, BA vs DC is rejected in the next round.
When multiple candidates tie with the best score, we pick one **at random** using the **date-seeded RNG** (reproducible within the day).

---

## Development

* Framework: **Vite + React + TypeScript**
* UI: **Tailwind CSS v4**, **shadcn/ui** (Button, Card)
* Deploy: **GitHub Pages** (auto build & deploy via Actions)

### Run Locally

```bash
npm i                # install deps
npm run dev          # dev server (http://localhost:5173)
npm run build        # production build
npm run preview      # preview build
```

### Deployment (GitHub Actions)

* Pushing to the `main` branch triggers **build & deploy** automatically.
* The base path is set to `base: '/tennis-pairing/'` in `vite.config.ts`.
* If updates don‚Äôt show up, add a cache-busting query like `?v=2025xxxx`.

### Tailwind Safelist

Since Tailwind prunes unused classes at build time, **dynamically toggled color classes** are safelisted in `tailwind.config.js`.

---

## Notes & Behavior

* **Outdoor/Indoor mode**: The button label stays ‚ÄúOutdoor Mode‚Äù; color indicates state (ON = yellow, OFF = white).
* **Display names**: shows ‚Äú{name}„Åï„Çì‚Äù in UI; raw names are stored without ‚Äú„Åï„Çì‚Äù.
* **Temporary leave**:

  * Only works when the player is currently selected.
  * Upon return, the player is favored by the recent-round logic.
* **Weights**: ‚ÄúReset weights to default‚Äù returns to `wPartner=2, wOpp=1, wPrev=1`.
* **Persistence**: `localStorage` keys `tdoubles_state_v1` / `tdoubles_prefs_v1`.

---

## Troubleshooting

* **Colors aren‚Äôt updating** ‚Üí Browser cache. Try adding `?v=2025xxxx` or hard reload.
* **Buttons look too pale on mobile** ‚Üí We disable OS coloring with `appearance-none` + strong `!bg/*` classes. If still an issue, please report your device/OS.
* **GitHub Pages returns 404** ‚Üí Check **Settings ‚Üí Pages** on this repo.

---

## Distribution Tips (Optional)

* **Short URL** (e.g., bit.ly) to share more easily.
* **QR code**: commit `docs/qr.png` and embed it in this README for courtside sharing.

---

## License

* Currently **Private**. Consider switching to **MIT** if you plan to open-source.

---

## Changelog (excerpt)

* MVP: outdoor/indoor modes, newest-first display, flip prevention & no double-rest, date-seeded randomness, self-tests, help text, confirmation modal, color tuning.
